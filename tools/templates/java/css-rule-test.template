___HEADER___
// DO NOT EDIT! This file is autogenerated by "npm run generate-meta"

package org.sonar.css.rules;

import static org.assertj.core.api.Assertions.assertThat;

import com.google.gson.Gson;
import java.lang.reflect.InvocationTargetException;
import java.util.Set;
import org.junit.jupiter.api.Test;
import org.mockito.internal.util.collections.Sets;
import org.sonar.check.RuleProperty;
import org.sonar.css.CssRules;

class CssRuleTest {

  private static final int RULES_PROPERTIES_COUNT = ___RULES_PROPERTIES_COUNT___;
  private static final Gson GSON = new Gson();

  @Test
  void class_name_should_match_rule_key()
    throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
    for (Class ruleClass : CssRules.getRuleClasses()) {
      org.sonar.check.Rule annotation = (org.sonar.check.Rule) ruleClass.getAnnotation(org.sonar.check.Rule.class);
      assertThat(ruleClass.getSimpleName()).isEqualTo(annotation.key());
    }
  }

  @Test
  void rules_default_is_empty()
    throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
    Set<Class> rulesWithStylelintOptions = Sets.newSet(
___RULES_WITH_OPTIONS_CLASSES___
    );

    for (Class ruleClass : CssRules.getRuleClasses()) {
      CssRule rule = (CssRule) ruleClass.getConstructor().newInstance();
      if (rulesWithStylelintOptions.contains(rule.getClass())) {
        assertThat(rule.stylelintOptions()).isNotEmpty();
      } else {
        assertThat(rule.stylelintOptions()).isEmpty();
      }
    }
  }

  /*
   * This test raises awareness of the consequence of a rule adding or removing a rule property.
   * If a new rule property is added to an existing rule, we should inform the SonarCloud team
   * about it on release. Rule properties of newly added rules are not concerned by that.
   */
  @Test
  void rules_properties_count() {
    var count = 0;
    for (var clazz : CssRules.getRuleClasses()) {
      for (var field : clazz.getDeclaredFields()) {
        if (field.isAnnotationPresent(RuleProperty.class)) {
          count++;
        }
      }
    }
    assertThat(count).isEqualTo(RULES_PROPERTIES_COUNT);
  }

___PER_RULE_TESTS___
}
